<div class="sticky-top">
  <div class="banner banner-bg" style="background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('<%= @challenge.photo.attached? ? (cl_image_path @challenge.photo.key, height: 200, crop: :fill) : (image_path 'pexels-photo-1552242.webp')%>')">
    <div class="container text-center chatbtn-c">
      <h1><%= @challenge.name %></h1>
      <p>£<%= number_with_precision(@challenge.amount, precision: 2) %></p>
      <p>By @<%= @challenge.user.username %></p>
      <% if !@my_user_challenge.nil? %>
        <% if @my_user_challenge.user == current_user %>
          <%= link_to chatroom_path(@challenge.chatrooms.first) do %>
            <div class="chat-bg">
              <i class="fas fa-envelope m-0 chatbtn"></i>
            </div>
          <% end %>
        <% end %>
      <% elsif @challenge.user == current_user %>
        <div>
          <br>
        </div>
      <% else %>
        <div>
          <br>
        </div>
      <% end %>
    </div>
  </div>
    <div class="navbar navbar-expand-sm navbar-light navbar-lewagon navbar-bottomborder mx-2">
      <div class="container-fluid" >
        <%= link_to "Rules", challenge_path(@challenge), class: "nav-link active-tab" %>
        <%= link_to "Members", members_path(@challenge), class: "nav-link" %>
        <%= link_to "Proof", challenge_exercises_path(@challenge), class: "nav-link" %>
        <%= link_to "Leaderboard", leaderboard_path(@challenge), class: "nav-link" %>
      </div>
    </div>
</div>



<% if !@my_user_challenge.nil? %>
  <% if @my_user_challenge.user == current_user %>
    <div>
      <br>
      <br>
    </div>
  <% end %>
<% elsif @challenge.user == current_user %>
  <div>
      <br>
      <br>
    </div>
<% else %>
   <div class="jbtn-container">
    <%= simple_form_for [@challenge, @user_challenge] do |f| %>
      <%= f.button :submit, "Join", class: "join-btn" %>
    <% end %>
  </div>
<% end %>

<div class="rules-container">
  <div class="rules">

    <div class="d-flex justify-content-start align-items-center me-3 my-2">
      <div class="rule-point-box">
        <i class="fas fa-calendar px-2 py-0 m-3 rule-points"></i>
      </div>
      <div>
        <%= @challenge.start_date %> - <%= @challenge.end_date %>
      </div>
    </div>

    <div class="d-flex justify-content-start align-items-center me-3 my-2">
      <div class="rule-point-box">
        <i class="fas fa-stopwatch px-2 py-0 m-3 rule-points"></i>
      </div>
      <div>
        <%= @challenge.exercise_length %>
      </div>
    </div>

    <div class="d-flex justify-content-start align-items-center me-3 my-2">
      <div class="rule-point-box">
        <i class="fas fa-running px-2 py-0 m-3 rule-points"></i>
      </div>
      <div>
        <%= @challenge.maximum %>
      </div>
    </div>

    <div class="d-flex justify-content-start align-items-center me-3 my-2">
      <div class="rule-point-box">
        <i class="fas fa-dollar-sign ps-2 pe-3 py-0 m-3 rule-points"></i>
      </div>
      <div>
        £<%= number_with_precision(@challenge.amount, precision: 2) %>
      </div>
    </div>

    <div class="d-flex justify-content-start align-items-center me-3 my-2">
      <div class="rule-point-box">
        <i class="fas fa-camera-retro px-2 py-0 m-3 rule-points"></i>
      </div>
      <div>
        <%= @challenge.proof %>
      </div>
    </div>

    <div class="d-flex justify-content-start align-items-center me-3 my-2">
      <div class="rule-point-box">
        <i class="fas fa-dumbbell px-2 py-0 m-3 rule-points"></i>
      </div>
      <div>
        <%= @challenge.points %>
      </div>
    </div>

    <div class="d-flex justify-content-start align-items-center me-3 my-2">
      <div class="rule-point-box">
        <i class="fas fa-biking px-2 py-0 m-3 rule-points"></i>
      </div>
      <div>
        <% if @challenge.rollover %>
          There are point rollovers
        <% else %>
          There are no point rollovers
        <% end %>
      </div>
    </div>

  </div>
</div>
